CREATE PROCEDURE ExtractENQValues ( INOUT SearchArray REFERENCE, IN FieldNames CHARACTER, OUT FieldValues CHARACTER)
BEGIN
	DECLARE I INTEGER 1;
	DECLARE SOURCE REFERENCE TO SearchArray.FieldNames.FieldName[1];
	X:LOOP
	IF CONTAINS(SOURCE,FieldNames) THEN
		SET FieldValues = SearchArray.FieldValues.FieldValue[I];
		LEAVE X;
	ELSEIF LASTMOVE(SOURCE)=FALSE THEN
		LEAVE X;
	END IF;
	SET I = I + 1;
	MOVE SOURCE NEXTSIBLING;
END LOOP;
END;