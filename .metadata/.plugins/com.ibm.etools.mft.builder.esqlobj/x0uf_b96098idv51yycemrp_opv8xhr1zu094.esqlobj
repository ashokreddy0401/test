CREATE PROCEDURE ExtractValues ( INOUT SearchArray REFERENCE, IN FieldNames CHARACTER, OUT FieldValues CHARACTER)
BEGIN
	DECLARE SOURCE REFERENCE TO SearchArray.OFS_Response.record.Message_Data[1];
	X:LOOP
	IF CONTAINS(SOURCE,FieldNames) THEN
		SET FieldValues = SUBSTRING(SOURCE AFTER '=');
		LEAVE X;
	ELSEIF LASTMOVE(SOURCE)=FALSE THEN
		LEAVE X;
	END IF;
	MOVE SOURCE NEXTSIBLING;
END LOOP;
END;